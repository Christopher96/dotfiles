updateClock();
setInterval(updateClock, 1000);

$(document).ready(function() {
    $("#search").focus();

    $(".btns button").click(function() {
	var btnid = $(this).attr("id");
	search(btnid);
    });

    $(document).bind("keydown", function(e){
	if(e.ctrlKey){
	    switch(e.keyCode) {
		case 83:
		case 67:
		    e.preventDefault();
		    if(e.keyCode == 83)
			$("#search").focus();
		    if(e.keyCode == 67)
			$("#search").blur();
		break;
	    }
	}

	if(e.keyCode == 9) {
	    e.preventDefault();
	    var button = $(".btns button[data-focus=true]");
	    button.attr("data-focus", false);
	    var next = button.next();
	    if( next.length == 0 ) {
		next = $(".btns button").first();
	    }
	    next.attr("data-focus", true);
	}

	if(e.keyCode == 13) {
	    search($(".btns button[data-focus=true]").attr("id"));
	}

    });

})

function search(btnid) {

    var searchterm = $("#search").val();
    var url = "";

    if(isURL(searchterm)){
	url = searchterm;
	alert();

    } else {

	switch(btnid) {
	    case "duck":
		    url = "https://duckduckgo.com/";
	    break;

	    case "google":
		    url = "https://google.com/search";
	    break;
	}
	
	url += "?q="+searchterm;
    }
    location.href = url;
}
function isURL(str) {
    var pattern = new RegExp('^((https?:)?\\/\\/)?'+ // protocol
        '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+ // domain name
        '((\\d{1,3}\\.){3}\\d{1,3}))'+ // OR ip (v4) address
        '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // port and path
        '(\\?[;&a-z\\d%_.~+=-]*)?'+ // query string
        '(\\#[-a-z\\d_]*)?$','i'); // fragment locater
    if (!pattern.test(str)) {
        return false;
    } else {
        return true;
    }
}

function updateClock() {
  var currentTime = new Date ( );

  var currentHours = currentTime.getHours ( );
  var currentMinutes = currentTime.getMinutes ( );
  var currentSeconds = currentTime.getSeconds ( );

  // Pad the minutes and seconds with leading zeros, if required
  currentMinutes = ( currentMinutes < 10 ? "0" : "" ) + currentMinutes;
  currentSeconds = ( currentSeconds < 10 ? "0" : "" ) + currentSeconds;


  // Compose the string for display
  var currentTimeString = currentHours + ":" + currentMinutes + ":" + currentSeconds;

  // Update the time display
  document.getElementById("clock").innerHTML = currentTimeString;
}

